(function(){"use strict";var e={4110:function(e,r,t){var n=t(9242),a=t(3396);function i(e,r,t,i,o,s){const c=(0,a.up)("Header"),l=(0,a.up)("router-view"),u=(0,a.up)("Footer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(c),(0,a.Wm)(n.uT,{mode:"in-out","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"},{default:(0,a.w5)((()=>[(0,a.Wm)(l)])),_:1}),(0,a.Wm)(u)],64)}const o={class:"header"},s={class:"header__wrapper"},c={class:"header-nav"},l=(0,a.Uk)("Форма"),u=(0,a.Uk)(" Превью ");function d(e,r,t,n,i,d){const f=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("header",o,[(0,a._)("div",s,[(0,a._)("nav",c,[(0,a.Wm)(f,{"active-class":"header-nav__link_active",class:"header-nav__link",to:"/"},{default:(0,a.w5)((()=>[l])),_:1}),(0,a.Wm)(f,{"active-class":"header-nav__link_active",class:"header-nav__link",to:"/preview"},{default:(0,a.w5)((()=>[u])),_:1})])])])}var f=(0,a.aZ)({name:"Header"}),h=t(89);const v=(0,h.Z)(f,[["render",d],["__scopeId","data-v-4c5c91b2"]]);var p=v;const m=e=>((0,a.dD)("data-v-67a08599"),e=e(),(0,a.Cn)(),e),g={class:"footer"},w=m((()=>(0,a._)("p",{class:"footer__text"}," all rights reserved ",-1))),b=[w];function y(e,r){return(0,a.wg)(),(0,a.iD)("footer",g,b)}const _={},C=(0,h.Z)(_,[["render",y],["__scopeId","data-v-67a08599"]]);var k=C,P={components:{Header:p,Footer:k}};const E=(0,h.Z)(P,[["render",i]]);var O=E,A=t(678);const j=[{path:"/",name:"form",component:()=>t.e(225).then(t.bind(t,6225))},{path:"/preview",name:"preview",component:()=>t.e(806).then(t.bind(t,2806))}],x=(0,A.p7)({history:(0,A.PO)("/Alef/"),routes:j});var S=x,T=t(65),I=t(2482);const F=(...e)=>e.map((e=>({...e})));class L{constructor(e){(0,I.Z)(this,"fields",void 0),this.fields=e}}const N=e=>Boolean(e)||"Поле обязательно!";var Z=t(536);const W=({label:e,validators:r,maxLength:t=30,type:n})=>({validators:r,label:e,type:n,value:"",touched:!1,maxLength:t,errors:[],id:(0,Z.Z)(),getErrors(){return this.validators.reduce(((e,r)=>{const t=r(this.value);return"string"===typeof t?[...e,t]:e}),[])},setTouch(e){this.touched=e}}),H=e=>Number.isInteger(+e)||"Введите число!",D=e=>e.length<=3||"Многовато!",B={label:"Возраст",validators:[N,H,D],maxLength:3,type:"number",value:"",touched:!1,errors:[],id:(0,Z.Z)()};var M=W(B);const V=e=>/^[a-zA-Zа-яА-Я]+$/iu.test(e)||"Только буквы!",U=e=>e.length>=2||"Слишком короткое!",q={label:"Имя",validators:[N,V,U],maxLength:25,type:"text",id:(0,Z.Z)(),value:"",touched:!1,errors:[]};var z=W(q),K=t(7823),Y=t.n(K),$=()=>({state:()=>({children:[],maxChildren:5}),getters:{canAddChildren:({children:e,maxChildren:r})=>e.length<r,childrenIsValid:({children:e})=>e.every((({fields:e})=>e.every((({errors:e,touched:r})=>!e.length&&r))))},mutations:{addEmptyChildrenForm(e){e.children.push(new L(F(z,M)))},updatePreviewChildren(e,r){e.previewChildren=r},deleteChildrenFromStore(e,r){e.children.splice(r,1)},writeChildrenInputErrors:(0,K.debounce)((function(e,r){if(e.children.length){const[t,n]=r;e.children[t].fields[n].errors=e.children[t].fields[n].getErrors()}}),100)},actions:{addChildren({commit:e,getters:{canAddChildren:r}},t){r&&e("addEmptyChildrenForm",t)},deleteChildren({commit:e},r){e("deleteChildrenFromStore",r)}}}),G=()=>({state:()=>({parent:new L(F(z,M))}),getters:{parentIsValid:({parent:e})=>e.fields.every((({errors:e,touched:r})=>!e.length&&r))},mutations:{writeParentInputErrors:Y()((function(e,r){null!==e.parent&&(e.parent.fields[r].errors=e.parent.fields[r].getErrors())}),100)},actions:{}}),J=(0,T.MT)({modules:{children:$(),parent:G()},state:()=>({previewChildren:[],previewParent:{}}),getters:{canSave:(e,{parentIsValid:r,childrenIsValid:t})=>r&&t,parentHasWritten:({previewParent:e})=>!!Object.keys(e).length,childrenHasWritten:({previewChildren:e})=>!!Object.keys(e).length,previewParentName:({previewParent:{name:e}})=>e,previewParentAge:({previewParent:{age:e}})=>+e},mutations:{writePreviewChildren(e){const r=e.children.children;e.previewChildren=r.reduce(((e,{fields:r})=>{const[t,n]=r.reduce(((e,{value:r})=>[...e,r]),[]);return[...e,{name:t,age:n}]}),[])},writePreviewParent(e){const r=e.parent.parent.fields,[t,n]=r.reduce(((e,{value:r})=>[...e,r]),[]);e.previewParent={name:t,age:n}}},actions:{updatePreview({commit:e,getters:{canSave:r},state:{children:t,parent:n}}){if(r)e("writePreviewChildren"),e("writePreviewParent");else{const e=n.parent.fields;e.forEach((e=>{e.errors=e.getErrors()}));const r=t.children;r.forEach((e=>{e.fields.forEach((e=>{e.errors=e.getErrors()}))}))}}}});(0,n.ri)(O).use(J).use(S).mount("#app")}},r={};function t(n){var a=r[n];if(void 0!==a)return a.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(r,n,a,i){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&i||o>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[c])}))?n.splice(c--,1):(s=!1,i<o&&(o=i));if(s){e.splice(u--,1);var l=a();void 0!==l&&(r=l)}}return r}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,a,i]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(r,n){return t.f[n](e,r),r}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{225:"8ed6e07a",806:"de82dcaa"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{225:"cfe37335",806:"5cd579fb"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={},r="alef:";t.l=function(n,a,i,o){if(e[n])e[n].push(a);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==r+i){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",r+i),s.src=n),e[n]=[a];var f=function(r,t){s.onerror=s.onload=null,clearTimeout(h);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(t)})),r)return r(t)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/Alef/"}(),function(){var e=function(e,r,t,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var i=function(i){if(a.onerror=a.onload=null,"load"===i.type)t();else{var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||r,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=s,a.parentNode.removeChild(a),n(c)}};return a.onerror=a.onload=i,a.href=r,document.head.appendChild(a),a},r=function(e,r){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var a=t[n],i=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===r))return a}var o=document.getElementsByTagName("style");for(n=0;n<o.length;n++){a=o[n],i=a.getAttribute("data-href");if(i===e||i===r)return a}},n=function(n){return new Promise((function(a,i){var o=t.miniCssF(n),s=t.p+o;if(r(o,s))return a();e(n,s,a,i)}))},a={143:0};t.f.miniCss=function(e,r){var t={225:1,806:1};a[e]?r.push(a[e]):0!==a[e]&&t[e]&&r.push(a[e]=n(e).then((function(){a[e]=0}),(function(r){throw delete a[e],r})))}}(),function(){var e={143:0};t.f.j=function(r,n){var a=t.o(e,r)?e[r]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise((function(t,n){a=e[r]=[t,n]}));n.push(a[2]=i);var o=t.p+t.u(r),s=new Error,c=function(n){if(t.o(e,r)&&(a=e[r],0!==a&&(e[r]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+r+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}};t.l(o,c,"chunk-"+r,r)}},t.O.j=function(r){return 0===e[r]};var r=function(r,n){var a,i,o=n[0],s=n[1],c=n[2],l=0;if(o.some((function(r){return 0!==e[r]}))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(c)var u=c(t)}for(r&&r(n);l<o.length;l++)i=o[l],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},n=self["webpackChunkalef"]=self["webpackChunkalef"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(4110)}));n=t.O(n)})();
//# sourceMappingURL=app.590362da.js.map